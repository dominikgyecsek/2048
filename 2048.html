<!DOCTYPE html>
<html>
<head>
	<title>2048</title>
	<style>

	body {
		font-size: 6em;
		line-height: 200px;
		text-align: center;
	}

	#game {
		background-color: red;
		width: 600px;
		height: 600px;
		margin: 0 auto;
	}

	.tile {
		width: 200px;
		height: 200px;
		background-color: gray;
		float: left;
	}

	</style>
</head>
<body>

<div id="game">
	<div class="tile" id="0"></div>
	<div class="tile" id="1"></div>
	<div class="tile" id="2"></div>
	<div class="tile" id="3"></div>
	<div class="tile" id="4"></div>
	<div class="tile" id="5"></div>
	<div class="tile" id="6"></div>
	<div class="tile" id="7"></div>
	<div class="tile" id="8"></div>
</div>

<input type="text" autofocus id="inputField"/>

<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
<script>

	var id;
	var availabilityCount = 0;
	var gameOver = false;
	var foundSpace = false;
	var random;
	var direction;
	var exit = false;
	var relVal;
	var toContinue = true;
	var wDirection = [2, 1, 0];
	var wSpace = [3, 6];
	var sDirection = [8, 7, 6];
	var sSpace = [-3, -6];
	var aDirection = [0, 3, 6];
	var aSpace = [1, 2];
	var dDirection = [2, 5, 8];
	var dSpace = [-1, -2];
	var spaceOne, spaceTwo;
	$("#2").text("2");

	$("#inputField").keyup(function(){

		if(!gameOver) {

			direction = $("#inputField").val();
			$("#inputField").val("");

			for (var i = 0; i < 3; i++) {

				if (direction == "w") {
					relVal = wDirection[i];
					spaceOne = wSpace[0];
					spaceTwo = wSpace[1];
				}

				if (direction == "s") {
					relVal = sDirection[i];
					spaceOne = sSpace[0];
					spaceTwo = sSpace[1];
				}	

				if (direction == "a") {
					relVal = aDirection[i];
					spaceOne = aSpace[0];
					spaceTwo = aSpace[1];
				}	

				if (direction == "d") {
					relVal = dDirection[i];
					spaceOne = dSpace[0];
					spaceTwo = dSpace[1];
				}	

				if ( ($("#"+relVal).text() == $("#"+(relVal+spaceOne)).text()) && ($("#"+relVal).text()) == ($("#"+(relVal+spaceTwo)).text() && $("#"+relVal).text() == "") ) {
					exit = true;	
				} else {
					if (($("#"+relVal).text() == "") && ($("#"+(relVal+spaceOne)).text() == "")){
							$("#"+(relVal)).text($("#"+(relVal+spaceTwo)).text());
							$("#"+(relVal+spaceTwo)).text("");
					} else if ($("#"+relVal).text() == "") {
						if ($("#"+(relVal+spaceOne)).text() == ($("#"+(relVal+spaceTwo)).text())) {
							$("#"+relVal).text(parseInt($("#"+(relVal+spaceOne)).text())*2);
							$("#"+(relVal+spaceOne)).text("");
							$("#"+(relVal+spaceTwo)).text("");
						} else {
							$("#"+relVal).text($("#"+(relVal+spaceOne)).text());
							$("#"+(relVal+spaceOne)).text($("#"+(relVal+spaceTwo)).text());
							$("#"+(relVal+spaceTwo)).text("");
						}
					} else if ($("#"+(relVal+spaceOne)).text() == "") {
						if ($("#"+relVal).text() == $("#"+(relVal+spaceTwo)).text()) {
							$("#"+relVal).text(parseInt($("#"+relVal).text())*2);
							$("#"+(relVal+spaceTwo)).text("");
						} else {
							$("#"+(relVal+spaceOne)).text($("#"+(relVal+spaceTwo)).text());
							$("#"+(relVal+spaceTwo)).text("");
						}
					} else if (($("#"+relVal).text()) == $("#"+(relVal+spaceOne)).text()) {
						$("#"+relVal).text(parseInt($("#"+relVal).text())*2);
						$("#"+(relVal+spaceOne)).text($("#"+(relVal+spaceTwo)).text());
						$("#"+(relVal+spaceTwo)).text("");
					} else if ($("#"+(relVal+spaceTwo)).text() == $("#"+(relVal+spaceOne)).text()) {
						$("#"+(relVal+spaceOne)).text(parseInt($("#"+(relVal+spaceTwo)).text())*2);	
						$("#"+(relVal+spaceTwo)).text("");
					}
				}	
			}							

			$(".tile").each(function(){
				if(($(this).text()) == "") {
					availabilityCount++;
				}
			})

			if (availabilityCount == 0) {
				gameOver = true;
				foundSpace = true;
			}

			availabilityCount = 0;

			while (!foundSpace) {
				random = getRandomInt(0, 8);
				if ($("#"+random).text() == "") {
					$("#"+random).text("2");
					foundSpace = true;
				}	
			}

			foundSpace = false;

		} else {
			alert("game over");
		}
	});

	function getRandomInt(min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;

	} 

</script>

</body>
</html>